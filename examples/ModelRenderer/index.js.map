{"version":3,"sources":["ModelRenderer/node_modules/browser-pack/_prelude.js","ModelRenderer/src/ModelRenderer/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/// This is an example application for the T3D library\n/// Skip down to onButtonClick to get to the juicy part\n/// This will be updated sooner or later, perhaps with a\n/// written guide, who knows.\n\nlet _lr;\nlet _context;\nlet _scene;\nlet _camera;\nlet _renderer;\nlet _models = [];\n\n/// Extend Original Logger\nconst myLogger = {\n  log: function () {\n    const htmlOutput = $(\"#log\");\n    let i = 1;\n    let str = \"\";\n    while (i < arguments.length) {\n      str += arguments[i];\n      i++;\n    }\n    htmlOutput.append($(\"<p>\" + str + \"</p>\"));\n    htmlOutput.append($(\"<p>-------------</p>\"));\n  },\n};\n\n$(document).ready(function () {\n  /// Build TREE scene\n  setupScene();\n\n  /// Handle file pick\n  $(\"#filePicker\").change(function (evt) {\n    const file = evt.target.files[0];\n\n    _lr = T3D.getLocalReader(file, onReaderCreated, \"../static/t3dworker.js\", myLogger);\n  });\n\n  /// Handle button click\n  $(\"#loadModelBtn\").click(onButtonClick);\n});\n\n/// Callback for when the LocalReader has finished setting up!\nfunction onReaderCreated() {\n  $(\"#fileIdInput\").removeAttr(\"disabled\");\n  $(\"#loadModelBtn\").removeAttr(\"disabled\");\n}\n\n/// The insterresting part!\nfunction onButtonClick() {\n  /// Get selected file id\n  const fileId = $(\"#fileIdInput\").val();\n\n  /// Let's use the SingleModelRenderer. It renders 3D stuff!\n  const renderClass = T3D.SingleModelRenderer;\n\n  /// All renderers must have access to a LocalReader.\n  /// The LocalReader is the object that allows us\n  /// to read from the .dat\n  const localReader = _lr;\n\n  /// The settings object is different for all renderers.\n  /// Accourding to documentation the SingleModelRenderer requires\n  /// the id of a file.\n  const settings = { id: fileId };\n\n  /// This is the value object that renderers use to write output!\n  /// If we ran multiple renderers that wanted to read output from\n  /// each other we'd have to pass this object to each Renderer!\n  /// Note that we'll want to access this object later, so make\n  /// sure it's stored in a scope we can reach from the callback\n  /// method.\n  _context = {};\n\n  /// The method to run when the renderer is done. Almost all\n  /// renderers are asynchronous since there is a lot of file\n  /// reading et cetera.\n  const callback = onRendererDone;\n\n  /// Running a renderer takes 5 mandatory parameters! Phew!\n  T3D.runRenderer(renderClass, localReader, settings, _context, callback);\n}\n\n/// Runs when the SingleModelRenderer is finshed\nfunction onRendererDone() {\n  /// Remove old models from the 3D scene\n  _models.forEach(function (mdl) {\n    _scene.remove(mdl);\n  });\n\n  /// Now we want to take a look in the output object!\n  /// The object we told the renderer to write to was _context\n  const readFromContext = _context;\n\n  /// The generator class we want output for is SingleModelRenderer\n  const readForClass = T3D.SingleModelRenderer;\n\n  /// The documentation says the generated outputs are:\n  ///\n  /// meshes : An array of THREE.Mesh objects visualizing this model file.\n  ///\n  /// Lets get that one!\n  const nameOfValue = \"meshes\";\n\n  /// Let's go!\n  _models = T3D.getContextValue(readFromContext, readForClass, nameOfValue);\n\n  /// From here on it's just THREE stuff:\n\n  /// Keeping track of the biggest model for later\n  let biggestMdl = null;\n\n  /// Add all models to the scene\n  _models.forEach(function (model) {\n    /// Find the biggest model for camera focus/fitting\n    if (!biggestMdl || biggestMdl.boundingSphere.radius < model.boundingSphere.radius) {\n      biggestMdl = model;\n    }\n\n    _scene.add(model);\n  });\n\n  _camera.position.x = 200;\n  _camera.position.y = 50;\n\n  /// Focus camera to the bigest model\n  if (biggestMdl) _camera.lookAt(biggestMdl.position);\n}\n\n/// Basic THREE stuff, don't mind it\nfunction setupScene() {\n  const canvasWidth = 500;\n  const canvasHeight = 500;\n  const canvasClearColor = 0x342920; // For happy rendering, always use Van Dyke Brown.\n  const fov = 60;\n  const aspect = 1;\n  const near = 0.1;\n  const far = 50000;\n\n  _camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\n\n  _scene = new THREE.Scene();\n\n  /// This scene has one ambient light source and three directional lights\n  const ambientLight = new THREE.AmbientLight(0x555555);\n  _scene.add(ambientLight);\n\n  const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.8);\n  directionalLight1.position.set(0, 0, 1);\n  _scene.add(directionalLight1);\n\n  const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.8);\n  directionalLight2.position.set(1, 0, 0);\n  _scene.add(directionalLight2);\n\n  const directionalLight3 = new THREE.DirectionalLight(0xffffff, 0.8);\n  directionalLight3.position.set(0, 1, 0);\n  _scene.add(directionalLight3);\n\n  /// Standard THREE renderer with AA\n  _renderer = new THREE.WebGLRenderer({ antialiasing: true });\n  document.body.appendChild(_renderer.domElement);\n  _renderer.setSize(canvasWidth, canvasHeight);\n  _renderer.setClearColor(canvasClearColor);\n\n  /// Add THREE orbit controls, for simple orbiting, panning and zooming\n  const orbit = new THREE.OrbitControls(_camera, _renderer.domElement);\n  orbit.enableZoom = true;\n\n  /// Note: constant continous rendering from page load\n  render();\n}\n\nfunction render() {\n  window.requestAnimationFrame(render);\n  _renderer.render(_scene, _camera);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvTW9kZWxSZW5kZXJlci9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8vIFRoaXMgaXMgYW4gZXhhbXBsZSBhcHBsaWNhdGlvbiBmb3IgdGhlIFQzRCBsaWJyYXJ5XG4vLy8gU2tpcCBkb3duIHRvIG9uQnV0dG9uQ2xpY2sgdG8gZ2V0IHRvIHRoZSBqdWljeSBwYXJ0XG4vLy8gVGhpcyB3aWxsIGJlIHVwZGF0ZWQgc29vbmVyIG9yIGxhdGVyLCBwZXJoYXBzIHdpdGggYVxuLy8vIHdyaXR0ZW4gZ3VpZGUsIHdobyBrbm93cy5cblxubGV0IF9scjtcbmxldCBfY29udGV4dDtcbmxldCBfc2NlbmU7XG5sZXQgX2NhbWVyYTtcbmxldCBfcmVuZGVyZXI7XG5sZXQgX21vZGVscyA9IFtdO1xuXG4vLy8gRXh0ZW5kIE9yaWdpbmFsIExvZ2dlclxuY29uc3QgbXlMb2dnZXIgPSB7XG4gIGxvZzogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGh0bWxPdXRwdXQgPSAkKFwiI2xvZ1wiKTtcbiAgICBsZXQgaSA9IDE7XG4gICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgd2hpbGUgKGkgPCBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBzdHIgKz0gYXJndW1lbnRzW2ldO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICBodG1sT3V0cHV0LmFwcGVuZCgkKFwiPHA+XCIgKyBzdHIgKyBcIjwvcD5cIikpO1xuICAgIGh0bWxPdXRwdXQuYXBwZW5kKCQoXCI8cD4tLS0tLS0tLS0tLS0tPC9wPlwiKSk7XG4gIH0sXG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gIC8vLyBCdWlsZCBUUkVFIHNjZW5lXG4gIHNldHVwU2NlbmUoKTtcblxuICAvLy8gSGFuZGxlIGZpbGUgcGlja1xuICAkKFwiI2ZpbGVQaWNrZXJcIikuY2hhbmdlKGZ1bmN0aW9uIChldnQpIHtcbiAgICBjb25zdCBmaWxlID0gZXZ0LnRhcmdldC5maWxlc1swXTtcblxuICAgIF9sciA9IFQzRC5nZXRMb2NhbFJlYWRlcihmaWxlLCBvblJlYWRlckNyZWF0ZWQsIFwiLi4vc3RhdGljL3QzZHdvcmtlci5qc1wiLCBteUxvZ2dlcik7XG4gIH0pO1xuXG4gIC8vLyBIYW5kbGUgYnV0dG9uIGNsaWNrXG4gICQoXCIjbG9hZE1vZGVsQnRuXCIpLmNsaWNrKG9uQnV0dG9uQ2xpY2spO1xufSk7XG5cbi8vLyBDYWxsYmFjayBmb3Igd2hlbiB0aGUgTG9jYWxSZWFkZXIgaGFzIGZpbmlzaGVkIHNldHRpbmcgdXAhXG5mdW5jdGlvbiBvblJlYWRlckNyZWF0ZWQoKSB7XG4gICQoXCIjZmlsZUlkSW5wdXRcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAkKFwiI2xvYWRNb2RlbEJ0blwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG59XG5cbi8vLyBUaGUgaW5zdGVycmVzdGluZyBwYXJ0IVxuZnVuY3Rpb24gb25CdXR0b25DbGljaygpIHtcbiAgLy8vIEdldCBzZWxlY3RlZCBmaWxlIGlkXG4gIGNvbnN0IGZpbGVJZCA9ICQoXCIjZmlsZUlkSW5wdXRcIikudmFsKCk7XG5cbiAgLy8vIExldCdzIHVzZSB0aGUgU2luZ2xlTW9kZWxSZW5kZXJlci4gSXQgcmVuZGVycyAzRCBzdHVmZiFcbiAgY29uc3QgcmVuZGVyQ2xhc3MgPSBUM0QuU2luZ2xlTW9kZWxSZW5kZXJlcjtcblxuICAvLy8gQWxsIHJlbmRlcmVycyBtdXN0IGhhdmUgYWNjZXNzIHRvIGEgTG9jYWxSZWFkZXIuXG4gIC8vLyBUaGUgTG9jYWxSZWFkZXIgaXMgdGhlIG9iamVjdCB0aGF0IGFsbG93cyB1c1xuICAvLy8gdG8gcmVhZCBmcm9tIHRoZSAuZGF0XG4gIGNvbnN0IGxvY2FsUmVhZGVyID0gX2xyO1xuXG4gIC8vLyBUaGUgc2V0dGluZ3Mgb2JqZWN0IGlzIGRpZmZlcmVudCBmb3IgYWxsIHJlbmRlcmVycy5cbiAgLy8vIEFjY291cmRpbmcgdG8gZG9jdW1lbnRhdGlvbiB0aGUgU2luZ2xlTW9kZWxSZW5kZXJlciByZXF1aXJlc1xuICAvLy8gdGhlIGlkIG9mIGEgZmlsZS5cbiAgY29uc3Qgc2V0dGluZ3MgPSB7IGlkOiBmaWxlSWQgfTtcblxuICAvLy8gVGhpcyBpcyB0aGUgdmFsdWUgb2JqZWN0IHRoYXQgcmVuZGVyZXJzIHVzZSB0byB3cml0ZSBvdXRwdXQhXG4gIC8vLyBJZiB3ZSByYW4gbXVsdGlwbGUgcmVuZGVyZXJzIHRoYXQgd2FudGVkIHRvIHJlYWQgb3V0cHV0IGZyb21cbiAgLy8vIGVhY2ggb3RoZXIgd2UnZCBoYXZlIHRvIHBhc3MgdGhpcyBvYmplY3QgdG8gZWFjaCBSZW5kZXJlciFcbiAgLy8vIE5vdGUgdGhhdCB3ZSdsbCB3YW50IHRvIGFjY2VzcyB0aGlzIG9iamVjdCBsYXRlciwgc28gbWFrZVxuICAvLy8gc3VyZSBpdCdzIHN0b3JlZCBpbiBhIHNjb3BlIHdlIGNhbiByZWFjaCBmcm9tIHRoZSBjYWxsYmFja1xuICAvLy8gbWV0aG9kLlxuICBfY29udGV4dCA9IHt9O1xuXG4gIC8vLyBUaGUgbWV0aG9kIHRvIHJ1biB3aGVuIHRoZSByZW5kZXJlciBpcyBkb25lLiBBbG1vc3QgYWxsXG4gIC8vLyByZW5kZXJlcnMgYXJlIGFzeW5jaHJvbm91cyBzaW5jZSB0aGVyZSBpcyBhIGxvdCBvZiBmaWxlXG4gIC8vLyByZWFkaW5nIGV0IGNldGVyYS5cbiAgY29uc3QgY2FsbGJhY2sgPSBvblJlbmRlcmVyRG9uZTtcblxuICAvLy8gUnVubmluZyBhIHJlbmRlcmVyIHRha2VzIDUgbWFuZGF0b3J5IHBhcmFtZXRlcnMhIFBoZXchXG4gIFQzRC5ydW5SZW5kZXJlcihyZW5kZXJDbGFzcywgbG9jYWxSZWFkZXIsIHNldHRpbmdzLCBfY29udGV4dCwgY2FsbGJhY2spO1xufVxuXG4vLy8gUnVucyB3aGVuIHRoZSBTaW5nbGVNb2RlbFJlbmRlcmVyIGlzIGZpbnNoZWRcbmZ1bmN0aW9uIG9uUmVuZGVyZXJEb25lKCkge1xuICAvLy8gUmVtb3ZlIG9sZCBtb2RlbHMgZnJvbSB0aGUgM0Qgc2NlbmVcbiAgX21vZGVscy5mb3JFYWNoKGZ1bmN0aW9uIChtZGwpIHtcbiAgICBfc2NlbmUucmVtb3ZlKG1kbCk7XG4gIH0pO1xuXG4gIC8vLyBOb3cgd2Ugd2FudCB0byB0YWtlIGEgbG9vayBpbiB0aGUgb3V0cHV0IG9iamVjdCFcbiAgLy8vIFRoZSBvYmplY3Qgd2UgdG9sZCB0aGUgcmVuZGVyZXIgdG8gd3JpdGUgdG8gd2FzIF9jb250ZXh0XG4gIGNvbnN0IHJlYWRGcm9tQ29udGV4dCA9IF9jb250ZXh0O1xuXG4gIC8vLyBUaGUgZ2VuZXJhdG9yIGNsYXNzIHdlIHdhbnQgb3V0cHV0IGZvciBpcyBTaW5nbGVNb2RlbFJlbmRlcmVyXG4gIGNvbnN0IHJlYWRGb3JDbGFzcyA9IFQzRC5TaW5nbGVNb2RlbFJlbmRlcmVyO1xuXG4gIC8vLyBUaGUgZG9jdW1lbnRhdGlvbiBzYXlzIHRoZSBnZW5lcmF0ZWQgb3V0cHV0cyBhcmU6XG4gIC8vL1xuICAvLy8gbWVzaGVzIDogQW4gYXJyYXkgb2YgVEhSRUUuTWVzaCBvYmplY3RzIHZpc3VhbGl6aW5nIHRoaXMgbW9kZWwgZmlsZS5cbiAgLy8vXG4gIC8vLyBMZXRzIGdldCB0aGF0IG9uZSFcbiAgY29uc3QgbmFtZU9mVmFsdWUgPSBcIm1lc2hlc1wiO1xuXG4gIC8vLyBMZXQncyBnbyFcbiAgX21vZGVscyA9IFQzRC5nZXRDb250ZXh0VmFsdWUocmVhZEZyb21Db250ZXh0LCByZWFkRm9yQ2xhc3MsIG5hbWVPZlZhbHVlKTtcblxuICAvLy8gRnJvbSBoZXJlIG9uIGl0J3MganVzdCBUSFJFRSBzdHVmZjpcblxuICAvLy8gS2VlcGluZyB0cmFjayBvZiB0aGUgYmlnZ2VzdCBtb2RlbCBmb3IgbGF0ZXJcbiAgbGV0IGJpZ2dlc3RNZGwgPSBudWxsO1xuXG4gIC8vLyBBZGQgYWxsIG1vZGVscyB0byB0aGUgc2NlbmVcbiAgX21vZGVscy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RlbCkge1xuICAgIC8vLyBGaW5kIHRoZSBiaWdnZXN0IG1vZGVsIGZvciBjYW1lcmEgZm9jdXMvZml0dGluZ1xuICAgIGlmICghYmlnZ2VzdE1kbCB8fCBiaWdnZXN0TWRsLmJvdW5kaW5nU3BoZXJlLnJhZGl1cyA8IG1vZGVsLmJvdW5kaW5nU3BoZXJlLnJhZGl1cykge1xuICAgICAgYmlnZ2VzdE1kbCA9IG1vZGVsO1xuICAgIH1cblxuICAgIF9zY2VuZS5hZGQobW9kZWwpO1xuICB9KTtcblxuICBfY2FtZXJhLnBvc2l0aW9uLnggPSAyMDA7XG4gIF9jYW1lcmEucG9zaXRpb24ueSA9IDUwO1xuXG4gIC8vLyBGb2N1cyBjYW1lcmEgdG8gdGhlIGJpZ2VzdCBtb2RlbFxuICBpZiAoYmlnZ2VzdE1kbCkgX2NhbWVyYS5sb29rQXQoYmlnZ2VzdE1kbC5wb3NpdGlvbik7XG59XG5cbi8vLyBCYXNpYyBUSFJFRSBzdHVmZiwgZG9uJ3QgbWluZCBpdFxuZnVuY3Rpb24gc2V0dXBTY2VuZSgpIHtcbiAgY29uc3QgY2FudmFzV2lkdGggPSA1MDA7XG4gIGNvbnN0IGNhbnZhc0hlaWdodCA9IDUwMDtcbiAgY29uc3QgY2FudmFzQ2xlYXJDb2xvciA9IDB4MzQyOTIwOyAvLyBGb3IgaGFwcHkgcmVuZGVyaW5nLCBhbHdheXMgdXNlIFZhbiBEeWtlIEJyb3duLlxuICBjb25zdCBmb3YgPSA2MDtcbiAgY29uc3QgYXNwZWN0ID0gMTtcbiAgY29uc3QgbmVhciA9IDAuMTtcbiAgY29uc3QgZmFyID0gNTAwMDA7XG5cbiAgX2NhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShmb3YsIGFzcGVjdCwgbmVhciwgZmFyKTtcblxuICBfc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuICAvLy8gVGhpcyBzY2VuZSBoYXMgb25lIGFtYmllbnQgbGlnaHQgc291cmNlIGFuZCB0aHJlZSBkaXJlY3Rpb25hbCBsaWdodHNcbiAgY29uc3QgYW1iaWVudExpZ2h0ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDU1NTU1NSk7XG4gIF9zY2VuZS5hZGQoYW1iaWVudExpZ2h0KTtcblxuICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0MSA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ZmZmZmZmLCAwLjgpO1xuICBkaXJlY3Rpb25hbExpZ2h0MS5wb3NpdGlvbi5zZXQoMCwgMCwgMSk7XG4gIF9zY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodDEpO1xuXG4gIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHQyID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7XG4gIGRpcmVjdGlvbmFsTGlnaHQyLnBvc2l0aW9uLnNldCgxLCAwLCAwKTtcbiAgX3NjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0Mik7XG5cbiAgY29uc3QgZGlyZWN0aW9uYWxMaWdodDMgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMC44KTtcbiAgZGlyZWN0aW9uYWxMaWdodDMucG9zaXRpb24uc2V0KDAsIDEsIDApO1xuICBfc2NlbmUuYWRkKGRpcmVjdGlvbmFsTGlnaHQzKTtcblxuICAvLy8gU3RhbmRhcmQgVEhSRUUgcmVuZGVyZXIgd2l0aCBBQVxuICBfcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7IGFudGlhbGlhc2luZzogdHJ1ZSB9KTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChfcmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gIF9yZW5kZXJlci5zZXRTaXplKGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpO1xuICBfcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcihjYW52YXNDbGVhckNvbG9yKTtcblxuICAvLy8gQWRkIFRIUkVFIG9yYml0IGNvbnRyb2xzLCBmb3Igc2ltcGxlIG9yYml0aW5nLCBwYW5uaW5nIGFuZCB6b29taW5nXG4gIGNvbnN0IG9yYml0ID0gbmV3IFRIUkVFLk9yYml0Q29udHJvbHMoX2NhbWVyYSwgX3JlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICBvcmJpdC5lbmFibGVab29tID0gdHJ1ZTtcblxuICAvLy8gTm90ZTogY29uc3RhbnQgY29udGlub3VzIHJlbmRlcmluZyBmcm9tIHBhZ2UgbG9hZFxuICByZW5kZXIoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gIF9yZW5kZXJlci5yZW5kZXIoX3NjZW5lLCBfY2FtZXJhKTtcbn1cbiJdfQ=="}